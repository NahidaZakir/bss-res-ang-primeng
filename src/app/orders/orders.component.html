<div class="">
  <div class="flex justify-between">
    <div class="border-b-1 border-red-700 mb-7 w-[250px]">
      <h1 class="heading-font">All Orders</h1>
    </div>
    <div>
      <p-button label="Search" variant="outlined" severity="danger" />
    </div>
  </div>
</div>

<!--Orders-->

<div class="flex flex-col md:grid md:grid-cols-12 gap-10">
  @for(order of allorders; track order.id ){
  <div class="md:col-span-6 lg:col-span-4">
    <div class=" ">
      <p-card>
        <ng-template #title>
          <div class="flex justify-between items-center">
            <div>
              <div>
                <h1 class="font-bold text-lg text-black">
                  {{ order.orderNumber }}
                </h1>
              </div>
              <div>
                <p class="text-gray-400 text-[15px] pb-[10px]">
                  {{ order.orderTime }}
                </p>
              </div>
            </div>
            <div
              class="w-[40px] h-[40px] rounded-full border-1 border-red-700 flex justify-center items-center deletebg"
            >
              <div class="deletebtn flex justify-center items-center w-full">
                <i class="pi pi-trash"></i>
              </div>
            </div>
          </div>
        </ng-template>

        <!-- <ng-template #title> Advanced Card </ng-template> -->
        <ng-template #subtitle>
          <div class="foodItems">
            @for(item of order.orderItems; track item.id){

            <div class="flex items-center mb-[10px] mr-[15px]">
              <!--Image-->
              <div class="mr-[20px]">
                <img
                  [src]="
                    'https://restaurantapi.bssoln.com/images/food/' +
                    item.food.image
                  "
                  alt=""
                  class="w-[80px] h-[80px] rounded-full"
                />
              </div>

              <!--Name-->
              <div class="flex justify-between w-2/3">
                <div>
                  <h1 class="mb-2 text-black font-bold text-lg">
                    {{ item.food.name }}
                  </h1>
                  <h1 class="text-green-600 font-bold">
                    {{ item.totalPrice }} ৳
                  </h1>
                </div>
                <div class="flex justify-center items-end">
                  <h1 class="text-black">Qty: {{ item.quantity }}</h1>
                </div>
              </div>
            </div>
            }
          </div>
        </ng-template>

        <ng-template #footer>
          <div class="flex justify-between gap-4 mt-1">
            <div class="text-black ">
              <h1>Total Item: {{ order.orderItems.length }}</h1>
              <h1>Total: {{ order.amount }} ৳</h1>
            </div>

            <div class="text-black">
              <h1>Table: {{ order.table.tableNumber }}</h1>
              <div class="flex justify-end">
                @if(showStatusOption){
                <div class="card  flex justify-center">
                  <p-select
                    [options]="cities"
                    [(ngModel)]="selectedCity"
                    optionLabel="name"
                    placeholder="{{order.orderStatus}}"
                    class="statusfield"
                    [style]="{border:'none'}"
                  />
                </div>
                } @if(!showStatusOption){
                <h1 class="mr-[10px]">{{ order.orderStatus }}</h1>
                <div class="editstatus" (click)="onEditStatus(order.id)">
                  <i class="pi pi-pen-to-square" style="font-size: 1.3rem"></i>
                </div>
                }
              </div>
            </div>
          </div>
        </ng-template>
      </p-card>
    </div>
  </div>
  }
</div>
